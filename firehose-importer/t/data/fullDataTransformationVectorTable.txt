# DATA TRANSFORMATION VECTOR TABLE
# this config file describes the relationship between Firehose input files, subroutines in import_and_convert_Firehose_data, 
# and cgds output files
#
# this file is read by DataTransformationVectorTable.
# the contents are then used by convertFirehoseData.pl.
# in particular, if a given Firehose input file exists, then convertFirehoseData.pl will call the associated subroutine to 
# generate the cgds file.
# also, convertFirehoseData.pl will optionally download from the NCI the list of Firehose files identified here

# each entry contains
# subroutine (FirehoseDirectory FirehoseFile)+ CGDSfile extraArguments;
# fields are separated by whitespace
# directories are relative to the cancer's Firehose data and CGDS import directories
# components in <>, such as <CANCER>, <date> and <version> indicate varying substrings; ALL CAPS INDICATES CAPITALIZATION
# ignore # comment lines and whitespace

# copy number
create_data_CNA
     gdac.broadinstitute.org_<CANCER>.CopyNumber_Gistic2.Level_4.<date><version>  all_thresholded.by_genes.txt 
     data_CNA.txt;

# both mRNA and miRNA expression
# this subroutine and create_data_mRNA_median and create_data_miRNA must all produce cgds files with the same name: data_expression_median.txt
create_data_both_mRNA_miRNA
    gdac.broadinstitute.org_<CANCER>.mRNA_Preprocess_Median.Level_4.<date><version> <CANCER>.medianexp.txt 
    gdac.broadinstitute.org_<CANCER>.Merge_mirna__h_mirna_8x15k<version>__unc_edu__Level_3__unc_DWD_Batch_adjusted__data.Level_3.<date><version> 
    <CANCER>.mirna__h_mirna_8x15k<version>__unc_edu__Level_3__unc_DWD_Batch_adjusted__data.data.txt 
    data_expression_median.txt;
 
# mRNA expression; will do nothing if both mRNA and miRNA data are present
create_data_mRNA_median
     gdac.broadinstitute.org_<CANCER>.mRNA_Preprocess_Median.Level_4.<date><version> <CANCER>.medianexp.txt 
     data_expression_median.txt;

# # miRNA; also will do nothing if both mRNA and miRNA data are present
create_data_miRNA
       gdac.broadinstitute.org_<CANCER>.Merge_mirna__h_mirna_8x15k<version>__unc_edu__Level_3__unc_DWD_Batch_adjusted__data.Level_3.<date><version> 
       <CANCER>.mirna__h_mirna_8x15k<version>__unc_edu__Level_3__unc_DWD_Batch_adjusted__data.data.txt 
       data_expression_median.txt;
 
# uses maf files
create_data_mutations_extended
      gdac.broadinstitute.org_<CANCER>.Mutation_Assessor.Level_4.<date><version> <CANCER>.maf.annotated  
      data_mutations_extended.txt;
 
# Zscores with Giovanni's program
# create_data_mRNA_median_Zscores
#	gdac.broadinstitute.org_<CANCER>.CopyNumber_Gistic2.Level_4.<date><version>  all_thresholded.by_genes.txt 
#	gdac.broadinstitute.org_<CANCER>.mRNA_Preprocess_Median.Level_4.<date><version> <CANCER>.medianexp.txt 
#	data_mRNA_median_Zscores.txt;

# obtain per-cancer gene 'whitelist' from mutation significance file
# since significantlyMutatedSomaticGenesWhitelist is not a data_* file, it won't have a meta file created, and won't be loaded into the cgds dbms
# the  x,y value at the end (e.g., 0.1,50) are q-value,n-percentage thresholds for selecting genes in the  significantlyMutatedSomaticGenesWhitelist.txt
# which will be used to filter the maf file
# the test refers to the previously processed maf file, which has 20 cases
create_mutation_white_list
    gdac.broadinstitute.org_<CANCER>.Mutation_Significance.Level_4.<date><version> <CANCER>.sig_genes.txt significantlyMutatedSomaticGenesWhitelist.txt 0.1,50;

# include clinical in the list; CGDS filename is a guess
# create_data_clinical
#	gdac.broadinstitute.org_<CANCER>.Clinical_Pick_Tier1.Level_4.<date><version> <CANCER>.clin.merged.picked.txt 
#	data_clinical.txt;

# create a data methylation file
# Present the beta value for the most anti-correlated probe on a gene.
create_data_methylation
    gdac.broadinstitute.org_<CANCER>.Correlate_Methylation_vs_mRNA.Level_4.<date><version> 
        Correlate_Methylation_vs_mRNA_<CANCER>_matrix.txt 
    gdac.broadinstitute.org_<CANCER>.Merge_methylation__humanmethylation27__jhu_usc_edu__Level_3__within_bioassay_data_set_function__data.Level_3.<date><version> 
        <CANCER>.methylation__humanmethylation27__jhu_usc_edu__Level_3__within_bioassay_data_set_function__data.data.txt
    data_methylation.txt;
